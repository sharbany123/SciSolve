<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Challenge Details | SciSolve</title>
    <style>
    :root {
        --primary-color: #1f2937; /* dark slate */
        --secondary-color: #3b82f6; /* sky blue */
        --accent-color: #f59e0b; /* amber */
        --light-color: #f3f4f6;
        --dark-color: #111827;
        --success-color: #10b981;
        --warning-color: #f59e0b;
        --danger-color: #ef4444;
        --biology-color: #27ae60;
        --physics-color: #9b59b6;
        --chemistry-color: #e67e22;
        --environmental-color: #1abc9c;
        --cs-color: #3498db;
        --math-color: #e74c3c;
        --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
        --transition: all 0.3s ease-in-out;
        --bg-image: url('wireframe-hologram-exploring-solar-system_1072731-1125.jpg');
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
        margin: 0;
        padding: 0;
        line-height: 1.6;
        background: linear-gradient(to right, rgba(31, 41, 55, 0.9), rgba(17, 24, 39, 0.9)),
                    var(--bg-image) no-repeat center center fixed;
        background-size: cover;
        color: var(--light-color);
        min-height: 100vh;
        animation: fadeIn 0.8s ease-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .container {
        width: 90%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }

    /* Header Styles */
    header {
        background-color: rgba(17, 24, 39, 0.95);
        box-shadow: var(--shadow-md);
        position: fixed;
        width: 100%;
        top: 0;
        z-index: 1000;
        backdrop-filter: blur(8px);
    }

    nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 0;
    }

    .logo {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--secondary-color);
        display: flex;
        align-items: center;
        transition: var(--transition);
    }

    .logo:hover {
        transform: translateY(-2px);
    }

    .logo span {
        color: var(--accent-color);
    }

    .nav-links {
        display: flex;
        list-style: none;
    }

    .nav-links li {
        margin-left: 2rem;
        position: relative;
    }

    .nav-links a {
        text-decoration: none;
        color: var(--light-color);
        font-weight: 500;
        transition: var(--transition);
        padding: 0.5rem 0;
    }

    .nav-links a:hover {
        color: var(--accent-color);
    }

    .nav-links a::after {
        content: '';
        position: absolute;
        width: 0;
        height: 2px;
        bottom: 0;
        left: 0;
        background-color: var(--accent-color);
        transition: var(--transition);
    }

    .nav-links a:hover::after {
        width: 100%;
    }

    .auth-buttons .btn {
        margin-left: 1rem;
        padding: 0.5rem 1.5rem;
        border-radius: 5px;
        font-weight: 500;
        cursor: pointer;
        transition: var(--transition);
        box-shadow: var(--shadow-md);
    }

    .btn-login {
        background-color: transparent;
        border: 1px solid var(--secondary-color);
        color: var(--secondary-color);
    }

    .btn-login:hover {
        background-color: var(--secondary-color);
        color: white;
        transform: translateY(-2px);
    }

    .btn-signup {
        background-color: var(--secondary-color);
        border: 1px solid var(--secondary-color);
        color: white;
    }

    .btn-signup:hover {
        background-color: #2563eb;
        border-color: #2563eb;
        transform: translateY(-2px);
    }

    /* Challenge Header */
    .challenge-header {
        padding: 8rem 0 2rem;
        color: white;
        background: linear-gradient(135deg, rgba(31, 41, 55, 0.9) 0%, rgba(17, 24, 39, 0.9) 100%);
        animation: slideUp 0.8s ease-out;
    }

    @keyframes slideUp {
        from { 
            opacity: 0;
            transform: translateY(20px);
        }
        to { 
            opacity: 1;
            transform: translateY(0);
        }
    }

    .challenge-title {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
        animation: fadeIn 1s ease-out;
    }

    .challenge-title h1 {
        font-size: 2.2rem;
        text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    .discipline-selector {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
    }

    .discipline-btn {
        padding: 0.5rem 1rem;
        border-radius: 20px;
        border: none;
        background-color: rgba(255,255,255,0.2);
        color: white;
        cursor: pointer;
        transition: var(--transition);
        font-size: 0.9rem;
    }

    .discipline-btn:hover {
        background-color: rgba(255,255,255,0.3);
        transform: translateY(-2px);
    }

    .discipline-btn.active {
        background-color: white;
        color: var(--primary-color);
        font-weight: 500;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .biology-btn.active { background-color: var(--biology-color); color: white; }
    .physics-btn.active { background-color: var(--physics-color); color: white; }
    .chemistry-btn.active { background-color: var(--chemistry-color); color: white; }
    .environmental-btn.active { background-color: var(--environmental-color); color: white; }
    .cs-btn.active { background-color: var(--cs-color); color: white; }
    .math-btn.active { background-color: var(--math-color); color: white; }

    .challenge-meta {
        display: flex;
        gap: 1.5rem;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
    }

    .meta-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        background: rgba(255,255,255,0.1);
        padding: 0.5rem 1rem;
        border-radius: 20px;
        transition: var(--transition);
    }

    .meta-item:hover {
        background: rgba(255,255,255,0.2);
        transform: translateY(-2px);
    }

    .challenge-category {
        display: inline-block;
        padding: 0.3rem 1rem;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: 500;
        transition: var(--transition);
    }

    .biology { background-color: var(--biology-color); color: white; }
    .physics { background-color: var(--physics-color); color: white; }
    .chemistry { background-color: var(--chemistry-color); color: white; }
    .environmental { background-color: var(--environmental-color); color: white; }
    .cs { background-color: var(--cs-color); color: white; }
    .math { background-color: var(--math-color); color: white; }

    .challenge-difficulty {
        display: inline-block;
        padding: 0.3rem 1rem;
        border-radius: 20px;
        font-size: 0.9rem;
        transition: var(--transition);
    }

    .difficulty-easy {
        background-color: var(--success-color);
        color: white;
    }

    .difficulty-medium {
        background-color: var(--warning-color);
        color: white;
    }

    .difficulty-hard {
        background-color: var(--danger-color);
        color: white;
    }

    /* Challenge Content */
    .challenge-content {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 2rem;
        padding: 2rem 0;
        animation: fadeIn 1s ease-out;
    }

    @media (max-width: 992px) {
        .challenge-content {
            grid-template-columns: 1fr;
        }
    }

    /* Main Content */
    .challenge-description {
        background-color: rgba(255, 255, 255, 0.1);
        padding: 2rem;
        border-radius: 8px;
        backdrop-filter: blur(8px);
        box-shadow: var(--shadow-md);
        margin-bottom: 2rem;
        transition: var(--transition);
        border: 1px solid rgba(255,255,255,0.1);
    }

    .challenge-description:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px rgba(0,0,0,0.2);
    }

    .challenge-description h2 {
        color: var(--light-color);
        margin-bottom: 1rem;
        font-size: 1.5rem;
    }

    .challenge-description p {
        margin-bottom: 1.5rem;
        color: var(--gray-light);
    }

    /* Simulation Area */
    .simulation-area {
        background-color: rgba(255, 255, 255, 0.1);
        padding: 2rem;
        border-radius: 8px;
        backdrop-filter: blur(8px);
        box-shadow: var(--shadow-md);
        margin-bottom: 2rem;
        transition: var(--transition);
        border: 1px solid rgba(255,255,255,0.1);
    }

    .simulation-area:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px rgba(0,0,0,0.2);
    }

    .simulation-area h2 {
        color: var(--light-color);
        margin-bottom: 1.5rem;
        font-size: 1.5rem;
    }

    .simulation-container {
        height: 400px;
        background-color: rgba(0,0,0,0.2);
        border: 1px dashed rgba(255,255,255,0.3);
        border-radius: 8px;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 1.5rem;
        position: relative;
        overflow: hidden;
        transition: var(--transition);
    }

    .simulation-container:hover {
        border-color: var(--secondary-color);
    }

    .simulation-placeholder {
        text-align: center;
        color: var(--gray-light);
        padding: 2rem;
    }

    .simulation-controls {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1rem;
        margin-bottom: 1.5rem;
    }

    .control-group {
        margin-bottom: 1rem;
    }

    .control-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
        color: var(--light-color);
    }

    .control-group input,
    .control-group select {
        width: 100%;
        padding: 0.6rem;
        background-color: rgba(255,255,255,0.1);
        border: 1px solid rgba(255,255,255,0.2);
        border-radius: 5px;
        color: white;
        transition: var(--transition);
    }

    .control-group input:focus,
    .control-group select:focus {
        outline: none;
        border-color: var(--secondary-color);
        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
    }

    .simulation-buttons {
        display: flex;
        gap: 1rem;
    }

    /* AI Assistant */
    .ai-assistant {
        background-color: rgba(255, 255, 255, 0.1);
        padding: 2rem;
        border-radius: 8px;
        backdrop-filter: blur(8px);
        box-shadow: var(--shadow-md);
        margin-bottom: 2rem;
        transition: var(--transition);
        border: 1px solid rgba(255,255,255,0.1);
    }

    .ai-assistant:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px rgba(0,0,0,0.2);
    }

    .ai-assistant h2 {
        color: var(--light-color);
        margin-bottom: 1.5rem;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .ai-assistant h2 i {
        color: var(--secondary-color);
    }

    .ai-message {
        background-color: rgba(0,0,0,0.2);
        padding: 1rem;
        border-radius: 5px;
        margin-bottom: 1rem;
        border-left: 4px solid var(--secondary-color);
        color: var(--light-color);
        transition: var(--transition);
    }

    .ai-message:hover {
        transform: translateX(5px);
    }

    .ai-prompt {
        display: flex;
        gap: 0.5rem;
    }

    .ai-prompt input {
        flex-grow: 1;
        padding: 0.8rem;
        background-color: rgba(255,255,255,0.1);
        border: 1px solid rgba(255,255,255,0.2);
        border-radius: 5px;
        color: white;
        transition: var(--transition);
    }

    .ai-prompt input:focus {
        outline: none;
        border-color: var(--secondary-color);
        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
    }

    .ai-prompt button {
        background-color: var(--secondary-color);
        color: white;
        border: none;
        padding: 0 1.5rem;
        border-radius: 5px;
        cursor: pointer;
        transition: var(--transition);
    }

    .ai-prompt button:hover {
        background-color: #2563eb;
        transform: translateY(-2px);
    }

    /* Submission Area */
    .submission-area {
        background-color: rgba(255, 255, 255, 0.1);
        padding: 2rem;
        border-radius: 8px;
        backdrop-filter: blur(8px);
        box-shadow: var(--shadow-md);
        margin-bottom: 2rem;
        transition: var(--transition);
        border: 1px solid rgba(255,255,255,0.1);
    }

    .submission-area:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px rgba(0,0,0,0.2);
    }

    .submission-area h2 {
        color: var(--light-color);
        margin-bottom: 1.5rem;
        font-size: 1.5rem;
    }

    .submission-form .form-group {
        margin-bottom: 1.5rem;
    }

    .submission-form label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
        color: var(--light-color);
    }

    .submission-form textarea {
        width: 100%;
        padding: 1rem;
        background-color: rgba(255,255,255,0.1);
        border: 1px solid rgba(255,255,255,0.2);
        border-radius: 5px;
        min-height: 150px;
        resize: vertical;
        color: white;
        transition: var(--transition);
    }

    .submission-form textarea:focus {
        outline: none;
        border-color: var(--secondary-color);
        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
    }

    .file-upload {
        border: 2px dashed rgba(255,255,255,0.3);
        border-radius: 5px;
        padding: 2rem;
        text-align: center;
        margin-bottom: 1rem;
        cursor: pointer;
        transition: var(--transition);
    }

    .file-upload:hover {
        border-color: var(--secondary-color);
        background-color: rgba(59, 130, 246, 0.1);
    }

    .file-upload i {
        font-size: 2rem;
        color: var(--secondary-color);
        margin-bottom: 0.5rem;
    }

    .file-upload p {
        color: var(--gray-light);
    }

    .btn-submit {
        background-color: var(--success-color);
        color: white;
        border: none;
        padding: 0.8rem 2rem;
        border-radius: 5px;
        font-weight: 500;
        cursor: pointer;
        transition: var(--transition);
        box-shadow: var(--shadow-md);
    }

    .btn-submit:hover {
        background-color: #0ea371;
        transform: translateY(-2px);
    }

    /* Sidebar */
    .challenge-sidebar {
        position: sticky;
        top: 100px;
    }

    .sidebar-card {
        background-color: rgba(255, 255, 255, 0.1);
        padding: 1.5rem;
        border-radius: 8px;
        backdrop-filter: blur(8px);
        box-shadow: var(--shadow-md);
        margin-bottom: 2rem;
        transition: var(--transition);
        border: 1px solid rgba(255,255,255,0.1);
    }

    .sidebar-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px rgba(0,0,0,0.2);
    }

    .sidebar-card h3 {
        color: var(--light-color);
        margin-bottom: 1rem;
        font-size: 1.2rem;
    }

    .progress-container {
        margin-bottom: 1.5rem;
    }

    .progress-label {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.5rem;
        color: var(--light-color);
    }

    .progress-bar {
        height: 8px;
        background-color: rgba(0,0,0,0.2);
        border-radius: 4px;
        overflow: hidden;
    }

    .progress-fill {
        height: 100%;
        background-color: var(--secondary-color);
        width: 65%;
        transition: width 1s ease-in-out;
    }

    .btn-join {
        display: block;
        width: 100%;
        background-color: var(--secondary-color);
        color: white;
        border: none;
        padding: 0.8rem;
        border-radius: 5px;
        font-weight: 500;
        cursor: pointer;
        transition: var(--transition);
        margin-bottom: 1.5rem;
        text-align: center;
        text-decoration: none;
        box-shadow: var(--shadow-md);
    }

    .btn-join:hover {
        background-color: #2563eb;
        transform: translateY(-2px);
    }

    .prize-info {
        text-align: center;
    }

    .prize-amount {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--accent-color);
        margin-bottom: 0.5rem;
    }

    /* Footer */
    footer {
        background-color: rgba(17, 24, 39, 0.95);
        padding: 3rem 0 1rem;
        margin-top: 3rem;
        backdrop-filter: blur(8px);
    }

    .copyright {
        text-align: center;
        padding-top: 2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--gray-light);
        font-size: 0.9rem;
    }

    /* Button Styles */
    .btn {
        padding: 0.8rem 1.5rem;
        border-radius: 6px;
        text-decoration: none;
        font-weight: bold;
        transition: var(--transition);
        cursor: pointer;
        display: inline-block;
        box-shadow: var(--shadow-md);
    }

    .btn-primary {
        background-color: var(--secondary-color);
        color: white;
        border: none;
    }

    .btn-primary:hover {
        background-color: #2563eb;
        transform: translateY(-2px);
    }

    .btn-secondary {
        background-color: transparent;
        color: var(--secondary-color);
        border: 2px solid var(--secondary-color);
    }

    .btn-secondary:hover {
        background-color: var(--secondary-color);
        color: white;
        transform: translateY(-2px);
    }

    /* Responsive Styles */
    @media (max-width: 768px) {
        .nav-links {
            display: none;
        }
        
        .challenge-header {
            padding: 6rem 0 1.5rem;
        }
        
        .challenge-title h1 {
            font-size: 1.8rem;
        }
        
        .discipline-selector {
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }
        
        .simulation-controls {
            grid-template-columns: 1fr;
        }
        
        .simulation-buttons {
            flex-direction: column;
        }
    }

    /* Animation Classes */
    .animate-pulse {
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }

    .animate-float {
        animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
    }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <div class="logo animate-float">Sci<span>Solve</span></div>
                <ul class="nav-links">
                    <li><a href="challenges.html">Challenges</a></li>
                    <li><a href="simulation_engine.html">Simulation</a></li>
                   
                </ul>
                
            </nav>
        </div>
    </header>

    <section class="challenge-header">
        <div class="container">
            <div class="challenge-title">
                <h1 id="challenge-title">Loading Challenge...</h1>
                <span class="challenge-category" id="challenge-category"></span>
            </div>
            
            <div class="discipline-selector">
                <button class="discipline-btn biology-btn" data-discipline="biology">Biology</button>
                <button class="discipline-btn physics-btn" data-discipline="physics">Physics</button>
                <button class="discipline-btn chemistry-btn" data-discipline="chemistry">Chemistry</button>
                <button class="discipline-btn environmental-btn" data-discipline="environmental">Environmental</button>
                <button class="discipline-btn cs-btn" data-discipline="cs">Computer Science</button>
                <button class="discipline-btn math-btn" data-discipline="math">Mathematics</button>
            </div>
            
            <div class="challenge-meta">
                <div class="meta-item">
                    <i class="fas fa-trophy"></i>
                    <span>Prize: <span id="challenge-prize">$0</span></span>
                </div>
                <div class="meta-item">
                    <i class="fas fa-users"></i>
                    <span><span id="participant-count">0</span> teams participating</span>
                </div>
                <div class="meta-item">
                    <i class="fas fa-clock"></i>
                    <span>Deadline: <span id="challenge-deadline">Loading...</span></span>
                </div>
                <div class="meta-item">
                    <span class="challenge-difficulty" id="challenge-difficulty">Loading</span>
                </div>
            </div>
        </div>
    </section>

    <div class="container">
        <div class="challenge-content">
            <!-- Main Content Column -->
            <div class="challenge-main">
                <!-- Challenge Description -->
                <div class="challenge-description">
                    <h2>Challenge Description</h2>
                    <p id="challenge-description">Loading challenge description...</p>
                    <p id="challenge-details">Loading challenge details...</p>
                    <h3>Requirements</h3>
                    <ul id="challenge-requirements" style="margin-bottom: 1.5rem; padding-left: 1.5rem; color: var(--gray-light);">
                        <!-- Will be populated by JavaScript -->
                    </ul>
                    <h3>Evaluation Criteria</h3>
                    <ul id="evaluation-criteria" style="margin-bottom: 1.5rem; padding-left: 1.5rem; color: var(--gray-light);">
                        <!-- Will be populated by JavaScript -->
                    </ul>
                </div>

                <!-- Simulation Area -->
                <div class="simulation-area">
                    <h2>Interactive Simulation</h2>
                    <div class="simulation-container" id="simulation-container">
                        <div class="simulation-placeholder" id="simulation-placeholder">
                            <i class="fas fa-atom" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                            <p id="simulation-title">Loading simulation...</p>
                            <p><small>Interactive features coming soon</small></p>
                        </div>
                    </div>
                    <div class="simulation-controls" id="simulation-controls">
                        <!-- Dynamic controls will be inserted here -->
                    </div>
                    <div class="simulation-buttons">
                        <button class="btn-primary btn animate-pulse" id="run-simulation">Run Simulation</button>
                        <button class="btn-secondary btn">Reset</button>
                    </div>
                </div>

                <!-- AI Assistant -->
                <div class="ai-assistant">
                    <h2><i class="fas fa-robot"></i> AI Research Assistant</h2>
                    <div class="ai-message" id="ai-message">
                        Loading AI assistant...
                    </div>
                    <div class="ai-prompt">
                        <input type="text" id="ai-input" placeholder="Ask a question about this challenge...">
                        <button id="ai-submit"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>

                <!-- Submission Area -->
                <div class="submission-area">
                    <h2>Submit Your Solution</h2>
                    <form class="submission-form" id="submission-form">
                        <div class="form-group">
                            <label for="solution-description">Solution Description</label>
                            <textarea id="solution-description" placeholder="Explain your approach, methodology, and any assumptions..."></textarea>
                        </div>

                        <div class="form-group">
                            <label>Upload Files</label>
                            <div class="file-upload" id="file-upload-area">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Drag & drop files here or click to browse</p>
                                <p><small>Supports .zip, .py, .ipynb, .pdf (Max 50MB)</small></p>
                            </div>
                            <div id="file-list"></div>
                        </div>

                        <button type="submit" class="btn-submit animate-pulse">Submit Solution</button>
                    </form>
                </div>
            </div>

            <!-- Sidebar Column -->
            <div class="challenge-sidebar">
                <div class="sidebar-card">
                    <h3>Challenge Progress</h3>
                    <div class="progress-container">
                        <div class="progress-label">
                            <span>Teams Participating</span>
                            <span id="teams-participating">0/0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="teams-progress" style="width: 0%;"></div>
                        </div>
                    </div>
                    <div class="progress-container">
                        <div class="progress-label">
                            <span>Time Remaining</span>
                            <span id="time-remaining">Loading...</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="time-progress" style="width: 0%;"></div>
                        </div>
                    </div>
                    <a href="#" class="btn-join animate-pulse" id="join-challenge-btn">Join Challenge</a>
                    <p style="text-align: center; color: var(--gray-light); font-size: 0.9rem;"><span id="teams-count">0</span> teams already participating</p>
                </div>
                
                <div class="sidebar-card">
                    <div class="prize-info">
                        <div class="prize-amount" id="prize-amount">$0</div>
                        <p>Total Prize Pool</p>
                    </div>
                </div>
                
                <div class="sidebar-card">
                    <h3>Related Challenges</h3>
                    <div class="related-challenges" id="related-challenges">
                        <!-- Dynamic content will be inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="copyright">
                <p>&copy; 2023 SciSolve. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Challenge data structure (can be moved to a separate data.js file)
        const challenges = {
            biology: {
                id: 1,
                title: "Protein Folding Prediction",
                category: "Biology",
                difficulty: "Hard",
                prize: "$5,000",
                participants: 24,
                deadline: "June 15, 2023",
                description: "Protein folding is the physical process by which a protein chain acquires its native 3-dimensional structure, a conformation that is usually biologically functional.",
                details: "In this challenge, you'll develop algorithms to predict protein folding patterns from amino acid sequences with higher accuracy than current methods.",
                requirements: [
                    "Algorithm must accept standard amino acid sequences as input",
                    "Output must be in PDB format",
                    "Solution must be computationally efficient",
                    "Documentation must explain the methodology"
                ],
                evaluation: [
                    "Accuracy compared to known structures (80%)",
                    "Computational efficiency (15%)",
                    "Innovation in approach (5%)"
                ],
                simulation: {
                    title: "Protein Folding Simulation",
                    controls: [
                        { label: "Protein Sequence", type: "text", id: "protein-seq", placeholder: "Enter amino acid sequence" },
                        { label: "Temperature (K)", type: "number", id: "temperature", value: "300" },
                        { label: "pH Level", type: "number", id: "ph-level", value: "7.0" }
                    ],
                    chart: {
                        type: "line",
                        labels: ["Alpha Helix", "Beta Sheet", "Turn", "Loop", "Other"],
                        data: [45, 30, 10, 10, 5],
                        label: "Structure Prediction"
                    }
                },
                related: [
                    { title: "Enzyme Catalysis Prediction", category: "Biology", participants: 18, image: "https://images.unsplash.com/photo-1581094271901-8022df4466f9?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
                    { title: "Drug-Target Interaction AI", category: "Computer Science", participants: 32, image: "https://images.unsplash.com/photo-1635070041078-e363dbe005cb?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" }
                ]
            },
            physics: {
                id: 2,
                title: "Quantum Entanglement Simulation",
                category: "Physics",
                difficulty: "Hard",
                prize: "$7,500",
                participants: 18,
                deadline: "July 22, 2023",
                description: "Quantum entanglement is a physical phenomenon that occurs when a group of particles are generated, interact, or share spatial proximity in such a way that the quantum state of each particle cannot be described independently of the state of the others.",
                details: "Develop a simulation that demonstrates quantum entanglement between particles and allows for the observation of quantum states when measurements are taken.",
                requirements: [
                    "Simulation must demonstrate entanglement of at least 2 particles",
                    "Visualization of quantum states before/after measurement",
                    "Support for different entanglement protocols",
                    "Clear documentation of the physics principles"
                ],
                evaluation: [
                    "Accuracy of quantum mechanics principles (70%)",
                    "Visual clarity and educational value (20%)",
                    "Computational efficiency (10%)"
                ],
                simulation: {
                    title: "Quantum Entanglement Simulator",
                    controls: [
                        { label: "Number of Qubits", type: "number", id: "qubit-count", value: "2" },
                        { label: "Entanglement Protocol", type: "select", id: "protocol", options: ["Bell State", "GHZ State", "W State"] },
                        { label: "Measurement Axis", type: "select", id: "measurement-axis", options: ["X", "Y", "Z"] }
                    ],
                    chart: {
                        type: "bar",
                        labels: ["Qubit 1", "Qubit 2", "Correlation"],
                        data: [0.5, 0.5, 1.0],
                        label: "Quantum States"
                    }
                },
                related: [
                    { title: "Quantum Error Correction", category: "Physics", participants: 12, image: "https://images.unsplash.com/photo-1506748686214-e9df14d4d9d0?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
                    { title: "Superconducting Materials", category: "Physics", participants: 9, image: "https://images.unsplash.com/photo-1605100804763-247f67b3557e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" }
                ]
            },
            chemistry: {
                id: 3,
                title: "Catalyst Efficiency Optimization",
                category: "Chemistry",
                difficulty: "Medium",
                prize: "$3,200",
                participants: 31,
                deadline: "May 30, 2023",
                description: "Catalysts are substances that increase the rate of a chemical reaction without being consumed in the process. Finding efficient catalysts is crucial for industrial chemistry and green energy solutions.",
                details: "Design a catalyst for the hydrogen evolution reaction (HER) that maximizes efficiency while minimizing the use of rare or expensive materials.",
                requirements: [
                    "Catalyst must work for HER in acidic conditions",
                    "Documented efficiency metrics",
                    "Material composition analysis",
                    "Scalability assessment"
                ],
                evaluation: [
                    "Catalytic efficiency (60%)",
                    "Material cost and availability (25%)",
                    "Environmental impact (15%)"
                ],
                simulation: {
                    title: "Catalyst Performance Simulator",
                    controls: [
                        { label: "Catalyst Material", type: "text", id: "catalyst-material", placeholder: "e.g. Pt/C, MoS2" },
                        { label: "Temperature (°C)", type: "number", id: "temp", value: "25" },
                        { label: "pH Level", type: "number", id: "ph", value: "0" }
                    ],
                    chart: {
                        type: "line",
                        labels: ["0V", "0.1V", "0.2V", "0.3V", "0.4V"],
                        data: [0, 5, 20, 45, 70],
                        label: "Current Density (mA/cm²)"
                    }
                },
                related: [
                    { title: "Green Solvent Development", category: "Chemistry", participants: 15, image: "https://images.unsplash.com/photo-1581094271901-8022df4466f9?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
                    { title: "Battery Electrode Design", category: "Materials Science", participants: 27, image: "https://images.unsplash.com/photo-1627637819794-fba32f82be16?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" }
                ]
            },
            environmental: {
                id: 4,
                title: "Carbon Sequestration Modeling",
                category: "Environmental",
                difficulty: "Medium",
                prize: "$4,500",
                participants: 22,
                deadline: "August 10, 2023",
                description: "Carbon sequestration is the process of capturing and storing atmospheric carbon dioxide to mitigate climate change. Accurate modeling helps assess the potential of different approaches.",
                details: "Create a model that predicts carbon sequestration potential for different ecosystems (forests, wetlands, agricultural land) under various climate scenarios.",
                requirements: [
                    "Model must include at least 3 ecosystem types",
                    "Projections for 2030, 2050, and 2100",
                    "Sensitivity analysis for climate variables",
                    "Clear visualization of results"
                ],
                evaluation: [
                    "Scientific accuracy (50%)",
                    "Model complexity and realism (30%)",
                    "Visualization quality (20%)"
                ],
                simulation: {
                    title: "Carbon Sequestration Model",
                    controls: [
                        { label: "Ecosystem Type", type: "select", id: "ecosystem", options: ["Tropical Forest", "Wetland", "Grassland", "Agricultural"] },
                        { label: "Climate Scenario", type: "select", id: "climate-scenario", options: ["RCP 2.6", "RCP 4.5", "RCP 8.5"] },
                        { label: "Time Horizon", type: "select", id: "time-horizon", options: ["2030", "2050", "2100"] }
                    ],
                    chart: {
                        type: "bar",
                        labels: ["2023", "2030", "2050", "2100"],
                        data: [0, 50, 120, 300],
                        label: "Carbon Sequestered (tons/ha)"
                    }
                },
                related: [
                    { title: "Climate Model Optimization", category: "Environmental", participants: 32, image: "https://images.unsplash.com/photo-1451187580459-43490279c0fa?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
                    { title: "Renewable Energy Grid", category: "Energy", participants: 28, image: "https://images.unsplash.com/photo-1508514177221-188b1cf16e9d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" }
                ]
            },
            cs: {
                id: 5,
                title: "AI for Medical Diagnosis",
                category: "Computer Science",
                difficulty: "Hard",
                prize: "$10,000",
                participants: 45,
                deadline: "September 5, 2023",
                description: "Artificial intelligence has shown great promise in medical imaging diagnosis, but challenges remain in generalization and explainability.",
                details: "Develop an AI system that can diagnose common conditions from chest X-rays with accuracy comparable to radiologists, while providing explainable decisions.",
                requirements: [
                    "Must use publicly available datasets",
                    "Explainability features required",
                    "Performance metrics on multiple conditions",
                    "Code must be reproducible"
                ],
                evaluation: [
                    "Diagnostic accuracy (60%)",
                    "Explainability quality (25%)",
                    "Computational efficiency (15%)"
                ],
                simulation: {
                    title: "Diagnosis Accuracy Testing",
                    controls: [
                        { label: "Model Architecture", type: "select", id: "model-arch", options: ["CNN", "ResNet", "ViT", "EfficientNet"] },
                        { label: "Training Epochs", type: "number", id: "epochs", value: "50" },
                        { label: "Test Dataset", type: "select", id: "dataset", options: ["CheXpert", "MIMIC-CXR", "NIH ChestX-ray"] }
                    ],
                    chart: {
                        type: "radar",
                        labels: ["Pneumonia", "Edema", "Atelectasis", "Cardiomegaly", "Consolidation"],
                        data: [0.85, 0.78, 0.82, 0.75, 0.80],
                        label: "Diagnosis Accuracy"
                    }
                },
                related: [
                    { title: "Drug Discovery AI", category: "Computer Science", participants: 28, image: "https://images.unsplash.com/photo-1635070041078-e363dbe005cb?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
                    { title: "Protein Structure Prediction", category: "Biology", participants: 24, image: "https://images.unsplash.com/photo-1532094349884-543bc11b234d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" }
                ]
            },
            math: {
                id: 6,
                title: "Optimization Algorithms",
                category: "Mathematics",
                difficulty: "Medium",
                prize: "$3,800",
                participants: 15,
                deadline: "July 8, 2023",
                description: "Many real-world problems in science and engineering can be framed as optimization problems, but traditional methods often struggle with high-dimensional, non-convex spaces.",
                details: "Develop novel optimization algorithms that can efficiently navigate high-dimensional, non-convex optimization landscapes with applications to scientific problems.",
                requirements: [
                    "Algorithm must be theoretically sound",
                    "Comparative benchmarks against existing methods",
                    "Clear explanation of innovations",
                    "Implementation in Python/Julia"
                ],
                evaluation: [
                    "Theoretical soundness (40%)",
                    "Performance benchmarks (40%)",
                    "Code quality (20%)"
                ],
                simulation: {
                    title: "Optimization Benchmarking",
                    controls: [
                        { label: "Test Function", type: "select", id: "test-func", options: ["Rosenbrock", "Ackley", "Rastrigin", "Styblinski-Tang"] },
                        { label: "Dimensions", type: "number", id: "dimensions", value: "10" },
                        { label: "Algorithm", type: "select", id: "algorithm", options: ["Gradient Descent", "Genetic Algorithm", "Simulated Annealing", "Your Method"] }
                    ],
                    chart: {
                        type: "line",
                        labels: ["1", "10", "100", "1000", "10000"],
                        data: [10, 5, 2, 1, 0.5],
                        label: "Error vs Iterations"
                    }
                },
                related: [
                    { title: "Quantum Algorithm Design", category: "Physics", participants: 8, image: "https://images.unsplash.com/photo-1506748686214-e9df14d4d9d0?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
                    { title: "Neural Network Theory", category: "Computer Science", participants: 19, image: "https://images.unsplash.com/photo-1620712943543-bcc4688e7485?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" }
                ]
            }
        };

        // DOM elements
        const disciplineBtns = document.querySelectorAll('.discipline-btn');
        const challengeTitle = document.getElementById('challenge-title');
        const challengeCategory = document.getElementById('challenge-category');
        const challengeDescription = document.getElementById('challenge-description');
        const challengeDetails = document.getElementById('challenge-details');
        const challengeRequirements = document.getElementById('challenge-requirements');
        const evaluationCriteria = document.getElementById('evaluation-criteria');
        const simulationContainer = document.getElementById('simulation-container');
        const simulationPlaceholder = document.getElementById('simulation-placeholder');
        const simulationControls = document.getElementById('simulation-controls');
        const simulationTitle = document.getElementById('simulation-title');
        const relatedChallenges = document.getElementById('related-challenges');
        const challengePrize = document.getElementById('challenge-prize');
        const participantCount = document.getElementById('participant-count');
        const challengeDeadline = document.getElementById('challenge-deadline');
        const challengeDifficulty = document.getElementById('challenge-difficulty');
        const teamsParticipating = document.getElementById('teams-participating');
        const timeRemaining = document.getElementById('time-remaining');
        const prizeAmount = document.getElementById('prize-amount');
        const teamsCount = document.getElementById('teams-count');
        const aiMessage = document.getElementById('ai-message');
        const aiInput = document.getElementById('ai-input');
        const aiSubmit = document.getElementById('ai-submit');
        const joinChallengeBtn = document.getElementById('join-challenge-btn');
        const runSimulationBtn = document.getElementById('run-simulation');
        const submissionForm = document.getElementById('submission-form');
        const fileUploadArea = document.getElementById('file-upload-area');
        const fileList = document.getElementById('file-list');

        // Current challenge state
        let currentChallenge = null;
        let chart = null;

        // Initialize page based on URL parameters
        function initializePage() {
            const urlParams = new URLSearchParams(window.location.search);
            const id = urlParams.get('id');
            const category = urlParams.get('category');
            
            if (id && category && challenges[category] && challenges[category].id == id) {
                loadChallenge(category);
            } else {
                // Default to first challenge if invalid parameters
                loadChallenge('biology');
            }
        }

        // Load challenge data
        function loadChallenge(category) {
            currentChallenge = challenges[category];
            
            // Update header
            challengeTitle.textContent = currentChallenge.title;
            challengeCategory.textContent = currentChallenge.category;
            challengeCategory.className = `challenge-category ${category}`;
            
            challengePrize.textContent = currentChallenge.prize;
            participantCount.textContent = currentChallenge.participants;
            challengeDeadline.textContent = currentChallenge.deadline;
            challengeDifficulty.textContent = currentChallenge.difficulty;
            challengeDifficulty.className = `challenge-difficulty difficulty-${currentChallenge.difficulty.toLowerCase()}`;
            
            // Update description
            challengeDescription.textContent = currentChallenge.description;
            challengeDetails.textContent = currentChallenge.details;
            
            // Update requirements
            challengeRequirements.innerHTML = currentChallenge.requirements.map(req => `<li>${req}</li>`).join('');
            
            // Update evaluation criteria
            evaluationCriteria.innerHTML = currentChallenge.evaluation.map(crit => `<li>${crit}</li>`).join('');
            
            // Update simulation
            simulationTitle.textContent = currentChallenge.simulation.title;
            updateSimulationControls(currentChallenge.simulation.controls);
            updateChart(currentChallenge.simulation.chart);
            
            // Update sidebar
            teamsParticipating.textContent = `${currentChallenge.participants}/50`;
            document.getElementById('teams-progress').style.width = `${(currentChallenge.participants/50)*100}%`;
            timeRemaining.textContent = "14 days"; // Simplified
            prizeAmount.textContent = currentChallenge.prize;
            teamsCount.textContent = currentChallenge.participants;
            
            // Update related challenges
            updateRelatedChallenges(currentChallenge.related);
            
            // Update AI assistant context
            aiMessage.textContent = `Hello! I'm your AI assistant specialized in ${currentChallenge.category.toLowerCase()} challenges. I can help you understand this problem, suggest approaches, or review your solution. Ask me anything about "${currentChallenge.title}"`;
            
            // Update active discipline button
            disciplineBtns.forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.discipline === category) {
                    btn.classList.add('active');
                    btn.classList.add(`${category}-btn`);
                }
            });
            
            // Update URL without reloading
            window.history.replaceState({}, '', `challenge-detail.html?id=${currentChallenge.id}&category=${category}`);
        }

        // Update simulation controls
        function updateSimulationControls(controls) {
            simulationControls.innerHTML = '';
            
            controls.forEach(control => {
                const controlGroup = document.createElement('div');
                controlGroup.className = 'control-group';
                
                const label = document.createElement('label');
                label.setAttribute('for', control.id);
                label.textContent = control.label;
                
                let input;
                
                if (control.type === 'select') {
                    input = document.createElement('select');
                    input.id = control.id;
                    control.options.forEach(option => {
                        const opt = document.createElement('option');
                        opt.value = option;
                        opt.textContent = option;
                        input.appendChild(opt);
                    });
                } else {
                    input = document.createElement('input');
                    input.type = control.type;
                    input.id = control.id;
                    if (control.placeholder) input.placeholder = control.placeholder;
                    if (control.value) input.value = control.value;
                }
                
                controlGroup.appendChild(label);
                controlGroup.appendChild(input);
                simulationControls.appendChild(controlGroup);
            });
        }

        // Update chart
        function updateChart(chartData) {
            // Remove existing chart if it exists
            if (chart) {
                chart.destroy();
            }
            
            // Clear simulation container
            simulationContainer.innerHTML = '';
            
            // Create new canvas
            const canvas = document.createElement('canvas');
            simulationContainer.appendChild(canvas);
            
            // Create new chart
            const ctx = canvas.getContext('2d');
            chart = new Chart(ctx, {
                type: chartData.type,
                data: {
                    labels: chartData.labels,
                    datasets: [{
                        label: chartData.label,
                        data: chartData.data,
                        backgroundColor: 'rgba(59, 130, 246, 0.2)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        borderWidth: 2,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            grid: {
                                color: 'rgba(255,255,255,0.1)'
                            },
                            ticks: {
                                color: 'rgba(255,255,255,0.7)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255,255,255,0.1)'
                            },
                            ticks: {
                                color: 'rgba(255,255,255,0.7)'
                            }
                        }
                    }
                }
            });
        }

        // Update related challenges
        function updateRelatedChallenges(related) {
            relatedChallenges.innerHTML = related.map(challenge => `
                <div class="related-challenge" onclick="window.location='challenge-detail.html?id=${challenges[challenge.category.toLowerCase()].id}&category=${challenge.category.toLowerCase()}'" style="cursor: pointer; margin-bottom: 1rem; transition: var(--transition);">
                    <img src="${challenge.image}" alt="${challenge.title}" style="width: 100%; height: 120px; object-fit: cover; border-radius: 5px; transition: var(--transition);">
                    <div style="margin-top: 0.5rem;">
                        <h4 style="color: var(--light-color);">${challenge.title}</h4>
                        <p style="color: var(--gray-light);">${challenge.category} • ${challenge.participants} teams</p>
                    </div>
                </div>
            `).join('');
        }

        // Discipline switcher
        disciplineBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const discipline = btn.dataset.discipline;
                loadChallenge(discipline);
            });
        });

        // AI Assistant functionality
        aiSubmit.addEventListener('click', () => {
            const question = aiInput.value.trim();
            if (question) {
                // Simulate AI response
                const responses = [
                    `For the "${currentChallenge.title}" challenge, ${getAIResponse(question, currentChallenge)}`,
                    `Regarding "${currentChallenge.title}", ${getAIResponse(question, currentChallenge)}`,
                    `For this ${currentChallenge.category.toLowerCase()} problem, ${getAIResponse(question, currentChallenge)}`
                ];
                
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                
                aiMessage.textContent = randomResponse;
                aiInput.value = '';
            }
        });

        // Simple AI response generator
        function getAIResponse(question, challenge) {
            const keywords = [
                'approach', 'method', 'how', 'what', 'resources',
                'data', 'code', 'solve', 'solution', 'help'
            ];
            const containsKeyword = keywords.some(keyword => 
                question.toLowerCase().includes(keyword)
            );
            
            if (containsKeyword) {
                const tips = [
                    `a common approach is to use ${getRandomMethod(challenge.category)}`,
                    `you might want to look into ${getRandomResource(challenge.category)}`,
                    `consider using ${getRandomTool(challenge.category)} for this task`,
                    `the evaluation criteria emphasize ${challenge.evaluation[0].split('(')[0]}`,
                    `many participants find ${getRandomTip(challenge.category)} helpful`
                ];
                
                return tips[Math.floor(Math.random() * tips.length)];
            } else {
                return "I'd be happy to help! Could you please clarify your question about the challenge requirements or your proposed solution?";
            }
        }

        // Helper functions for AI responses
        function getRandomMethod(discipline) {
            const methods = {
                biology: ["deep learning models like AlphaFold", "molecular dynamics simulations", "homology modeling"],
                physics: ["quantum computing simulations", "Monte Carlo methods", "finite element analysis"],
                chemistry: ["density functional theory", "molecular docking", "QSAR modeling"],
                environmental: ["GIS spatial analysis", "climate modeling frameworks", "remote sensing data"],
                cs: ["convolutional neural networks", "transformers", "reinforcement learning"],
                math: ["gradient descent optimization", "genetic algorithms", "simulated annealing"]
            };
            return methods[discipline.toLowerCase()][Math.floor(Math.random() * methods[discipline.toLowerCase()].length)];
        }

        function getRandomResource(discipline) {
            const resources = {
                biology: ["Protein Data Bank", "UniProt database", "NCBI resources"],
                physics: ["arXiv quantum physics papers", "NIST physical reference data", "Quantum Open Source Foundation tools"],
                chemistry: ["PubChem", "ChemSpider", "Cambridge Structural Database"],
                environmental: ["NASA Earthdata", "IPCC reports", "NOAA climate datasets"],
                cs: ["GitHub repositories", "Papers With Code", "arXiv machine learning papers"],
                math: ["arXiv math.OC papers", "SIAM resources", "Wolfram MathWorld"]
            };
            return resources[discipline.toLowerCase()][Math.floor(Math.random() * resources[discipline.toLowerCase()].length)];
        }

        function getRandomTool(discipline) {
            const tools = {
                biology: ["PyMOL", "Rosetta", "GROMACS"],
                physics: ["Qiskit", "QuTiP", "LAMMPS"],
                chemistry: ["Gaussian", "VASP", "AutoDock"],
                environmental: ["ArcGIS", "QGIS", "CDO"],
                cs: ["TensorFlow", "PyTorch", "scikit-learn"],
                math: ["MATLAB", "NumPy", "Julia"]
            };
            return tools[discipline.toLowerCase()][Math.floor(Math.random() * tools[discipline.toLowerCase()].length)];
        }

        function getRandomTip(discipline) {
            const tips = {
                biology: ["starting with known protein structures helpful", "using multiple sequence alignments valuable", "considering physicochemical properties important"],
                physics: ["visualizing quantum states first helps understanding", "starting with 2-qubit systems recommended", "documenting state vectors clearly crucial"],
                chemistry: ["testing at multiple pH levels beneficial", "comparing to platinum benchmarks useful", "considering catalyst stability important"],
                environmental: ["using multiple climate scenarios recommended", "validating with historical data valuable", "considering regional variations important"],
                cs: ["starting with transfer learning helpful", "using attention maps for explainability recommended", "testing on multiple datasets valuable"],
                math: ["visualizing the optimization landscape first helpful", "comparing convergence rates useful", "testing on multiple problem types recommended"]
            };
            return tips[discipline.toLowerCase()][Math.floor(Math.random() * tips[discipline.toLowerCase()].length)];
        }

        // Run simulation button
        runSimulationBtn.addEventListener('click', () => {
            alert(`Running ${currentChallenge.simulation.title} with current parameters...\n\nThis would connect to a real simulation backend in production.`);
        });

        // File upload interaction
        fileUploadArea.addEventListener('click', () => {
            // Simulate file selection
            setTimeout(() => {
                fileList.innerHTML = `
                    <div style="background: rgba(0,0,0,0.2); padding: 0.8rem; border-radius: 5px; margin-top: 0.5rem; display: flex; justify-content: space-between; align-items: center; color: var(--light-color);">
                        <span><i class="fas fa-file-code" style="margin-right: 0.5rem;"></i> ${currentChallenge.category.toLowerCase()}_solution.zip</span>
                        <button style="background: none; border: none; color: var(--danger-color); cursor: pointer;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
            }, 300);
        });

        // Form submission
        submissionForm.addEventListener('submit', (e) => {
            e.preventDefault();
            alert(`Thank you for your submission to the ${currentChallenge.title} challenge!\n\nYour solution has been received and will be reviewed by our team.`);
        });

        // Join challenge button
        joinChallengeBtn.addEventListener('click', (e) => {
            e.preventDefault();
            alert(`You have joined the ${currentChallenge.title} challenge!\n\nYou can now participate in discussions and submit solutions.`);
            joinChallengeBtn.textContent = "Joined!";
            joinChallengeBtn.style.backgroundColor = "var(--success-color)";
        });

        // Initialize the page when loaded
        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
    <script>
document.addEventListener('DOMContentLoaded', async function(){
  const id = new URL(location.href).searchParams.get('id');
  if (!id) return alert('No challenge id');

  // load challenge detail
  const res = await fetch('./api/challenge_detail.php?id='+id);
  if (!res.ok) return alert('Challenge not found');
  const c = await res.json();
  document.getElementById('challenge-title').textContent = c.title;
  document.getElementById('challenge-description').textContent = c.description || '';
  document.getElementById('prize-amount') && (document.getElementById('prize-amount').textContent = c.prize || '—');
  document.getElementById('teams-count') && (document.getElementById('teams-count').textContent = c.participants_count || 0);

  // related challenges (sidebar)
  if (c.category) {
    fetch('./api/challenge_related.php?category=' + encodeURIComponent(c.category) + '&exclude=' + id)
      .then(r=>r.json()).then(list=>{
        const box = document.getElementById('related-challenges');
        if(!box) return;
        box.innerHTML = '';
        list.forEach(it => box.innerHTML += `<div class="related-item"><a href="challenge-detail.html?id=${it.challenge_id}">${it.title}</a></div>`);
      });
  }

  // Join button
  const joinBtn = document.getElementById('join-challenge-btn');
  if (joinBtn) {
    joinBtn.addEventListener('click', async function(e){
      e.preventDefault();
      const frm = new FormData();
      frm.append('challenge_id', id);
      const r = await fetch('./api/challenge_join.php', { method:'POST', body: frm });
      const j = await r.json();
      if (j.success) {
        document.getElementById('teams-count').textContent = j.participants_count;
        joinBtn.textContent = 'Joined!'; joinBtn.disabled = true;
      } else alert('Join failed');
    });
  }

  // Submission form (PDF shows form id "submission-form" / class "submission-form")
  const subForm = document.getElementById('submission-form') || document.querySelector('.submission-form');
  if (subForm) {
    subForm.addEventListener('submit', async function(e){
      e.preventDefault();
      const fd = new FormData(subForm);
      fd.append('challenge_id', id);
      // if file upload area uses input#submission-file
      const res = await fetch('./api/challenge_submit.php', { method:'POST', body: fd });
      const j = await res.json();
      if (j.success) {
        alert('Submission received!');
        subForm.reset();
      } else alert('Submit failed: ' + (j.error||''));
    });
  }

  // Simulation run (run-simulation button)
  const runBtn = document.getElementById('run-simulation');
  if (runBtn) {
    runBtn.addEventListener('click', async function(e){
      e.preventDefault();
      // collect controls (simulation-controls container exists in PDF)
      const controls = document.querySelectorAll('#simulation-controls input, #simulation-controls select');
      const params = {};
      controls.forEach(c => { if (c.type === 'checkbox') params[c.id] = c.checked; else params[c.id] = c.value; });
      const payload = { challengeId: id, type: 'projectile', parameters: params };
      const res = await fetch('./api/simulation_run.php', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });
      const j = await res.json();
      if (j.success) {
        // show result on same page or redirect to result.html?simId=... — here we pass results via sessionStorage:
        sessionStorage.setItem('currentSimulation', JSON.stringify({ results:j.results, config:{title:c.title,type:'projectile',parameters:params} }));
        location.href = 'result.html';
      } else alert('Simulation error');
    });
  }

});
</script>

</body>
</html>